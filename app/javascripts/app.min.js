var Web3=require('web3'),web3=new Web3;web3.setProvider(new web3.providers.HttpProvider);var ScreamContractAddr='0x86E5b6D7648b8B994886aeB98E2B4770675e608D';window.addEventListener('load',function(){'undefined'!=typeof web3&&(window.web3=new Web3(web3.currentProvider),console.log('web3: '+web3),console.log('window.web3: '+window.web3),web3.currentProvider.isMetaMask?'undefined'==typeof web3.eth.defaultAccount||(document.write('Starting app...'),document.body.innerHTML='<body><h1>App running.</h1></body>'):(console.log('Trying infura'),window.web3=new Web3(new Web3.providers.HttpProvider('http://localhost:8545'))))});function zeroize(a){return('0'+a).slice(-2)}function formatDate(a){var c=a.getDate(),d=a.getMonth(),e=a.getFullYear();return c+' '+['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][d]+' '+e+' '+zeroize(a.getHours())+':'+zeroize(a.getMinutes())}optionsShout={fromBlock:4289879,toBlock:'latest',address:ScreamContractAddr,topics:[web3.sha3('__Shout(string)')]};const filter=web3.eth.filter(optionsShout);function gotBlock(a,b){let c=a.timestamp,d=new Date(1e3*c);console.log(b.data);let e=b.data.replace('0x',''),f=coder.decodeParams(['string'],e),g=document.createElement('div');g.innerHTML=formatDate(d)+' - '+f+'<br/>',document.getElementById('Shouts').appendChild(g)}function displayEvent(a,b){let c=b.blockNumber;web3.eth.getBlock(c,(d,e)=>{d?console.error(d):gotBlock(e,b)})}filter.watch((a,b)=>{a||displayEvent('event1',b)});